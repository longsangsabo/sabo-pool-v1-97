
<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SABO Billiards - H·ªá th·ªëng ƒë·∫∑t b√†n tr·ª±c tuy·∫øn</title>
    <meta name="description" content="H·ªá th·ªëng ƒë·∫∑t b√†n billiards tr·ª±c tuy·∫øn cho SABO Billiards" />
    <meta name="author" content="SABO Billiards" />

    <meta property="og:title" content="SABO Billiards" />
    <meta property="og:description" content="H·ªá th·ªëng ƒë·∫∑t b√†n bi-a tr·ª±c tuy·∫øn" />
    <meta property="og:type" content="website" />

    <meta name="twitter:card" content="summary_large_image" />

    <!-- Enhanced Critical CSS -->
    <style>
      /* Reset and base styles */
      * {
        box-sizing: border-box;
      }
      
      body {
        margin: 0;
        padding: 0;
        font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        background: linear-gradient(135deg, #1a5d4a, #166534, #1a5d4a);
        color: white;
        line-height: 1.4;
      }
      
      #root {
        min-height: 100vh;
      }
      
      .loading-fallback {
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        background: linear-gradient(135deg, #1a5d4a, #166534, #1a5d4a);
        color: white;
        padding: 20px;
      }
      
      .loading-content {
        text-align: center;
        max-width: 400px;
        width: 100%;
      }
      
      .loading-spinner {
        width: 40px;
        height: 40px;
        border: 3px solid rgba(251, 191, 36, 0.2);
        border-top: 3px solid #fbbf24;
        border-radius: 50%;
        animation: spin 1s linear infinite;
        margin: 0 auto 20px;
      }
      
      .loading-title {
        font-size: 24px;
        font-weight: bold;
        color: #fbbf24;
        margin-bottom: 12px;
      }
      
      .loading-text {
        font-size: 16px;
        color: #d1fae5;
        margin-bottom: 20px;
      }
      
      .loading-progress {
        width: 100%;
        height: 4px;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 2px;
        overflow: hidden;
        margin-bottom: 15px;
      }
      
      .loading-progress-bar {
        height: 100%;
        background: linear-gradient(90deg, #fbbf24, #f59e0b);
        border-radius: 2px;
        animation: progress 3s ease-in-out infinite;
      }
      
      .loading-status {
        font-size: 14px;
        color: #a7f3d0;
        opacity: 0.8;
      }
      
      @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
      }
      
      @keyframes progress {
        0% { width: 0%; }
        50% { width: 70%; }
        100% { width: 100%; }
      }
      
      .error-fallback {
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        background: linear-gradient(135deg, #7f1d1d, #991b1b, #7f1d1d);
        color: white;
        padding: 20px;
      }
      
      .error-content {
        text-align: center;
        max-width: 500px;
        width: 100%;
      }
      
      .error-title {
        font-size: 28px;
        font-weight: bold;
        color: #fbbf24;
        margin-bottom: 16px;
      }
      
      .error-button {
        background: #fbbf24;
        color: #1a5d4a;
        border: none;
        padding: 12px 24px;
        border-radius: 6px;
        font-weight: bold;
        cursor: pointer;
        margin: 5px;
        font-size: 14px;
      }
      
      .error-button:hover {
        background: #f59e0b;
      }
      
      .debug-info {
        font-size: 12px;
        color: #a7f3d0;
        margin-top: 20px;
        padding: 10px;
        background: rgba(0, 0, 0, 0.2);
        border-radius: 6px;
        text-align: left;
      }
    </style>
  </head>

  <body>
    <div id="root">
      <!-- Enhanced loading state -->
      <div class="loading-fallback" id="loading-screen">
        <div class="loading-content">
          <div class="loading-spinner"></div>
          <div class="loading-title">üé± SABO Billiards</div>
          <div class="loading-text">ƒêang kh·ªüi ƒë·ªông h·ªá th·ªëng...</div>
          <div class="loading-progress">
            <div class="loading-progress-bar"></div>
          </div>
          <div class="loading-status" id="loading-status">ƒêang t·∫£i c√°c th√†nh ph·∫ßn...</div>
        </div>
      </div>
    </div>

    <script type="module" src="/src/main.tsx"></script>
    
    <!-- Enhanced fallback and monitoring script -->
    <script>
      // Loading status updates
      const statusElement = document.getElementById('loading-status');
      const loadingSteps = [
        'ƒêang t·∫£i c√°c th√†nh ph·∫ßn...',
        'ƒêang k·∫øt n·ªëi c∆° s·ªü d·ªØ li·ªáu...',
        'ƒêang kh·ªüi t·∫°o giao di·ªán...',
        'ƒêang ho√†n t·∫•t...'
      ];
      
      let stepIndex = 0;
      const updateStatus = () => {
        if (statusElement && stepIndex < loadingSteps.length) {
          statusElement.textContent = loadingSteps[stepIndex];
          stepIndex++;
        }
      };
      
      // Update loading status every 800ms
      const statusInterval = setInterval(updateStatus, 800);
      
      // Monitor loading progress
      let loadStartTime = Date.now();
      console.log('üöÄ Page load started at:', new Date().toISOString());
      
      // Clear loading screen when React takes over
      const clearLoadingScreen = () => {
        const loadingScreen = document.getElementById('loading-screen');
        if (loadingScreen) {
          loadingScreen.style.opacity = '0';
          loadingScreen.style.transition = 'opacity 0.5s ease-out';
          setTimeout(() => {
            if (loadingScreen.parentNode) {
              loadingScreen.parentNode.removeChild(loadingScreen);
            }
          }, 500);
        }
        clearInterval(statusInterval);
        console.log('‚úÖ Loading screen cleared after:', Date.now() - loadStartTime, 'ms');
      };
      
      // Check if React has mounted (more reliable detection)
      const checkReactMount = () => {
        const reactElements = document.querySelectorAll('[data-reactroot], [data-react-class], .react-component');
        const hasReactContent = document.body.innerHTML.includes('SABO Billiards') && !document.getElementById('loading-screen');
        
        if (reactElements.length > 0 || hasReactContent) {
          clearLoadingScreen();
          return true;
        }
        return false;
      };
      
      // Check every 100ms for React mount
      const mountCheckInterval = setInterval(() => {
        if (checkReactMount()) {
          clearInterval(mountCheckInterval);
        }
      }, 100);
      
      // Fallback timeout - show error if app doesn't load within 15 seconds
      const errorTimeout = setTimeout(function() {
        const root = document.getElementById('root');
        const loadingScreen = document.getElementById('loading-screen');
        
        // Only show error if still showing loading screen
        if (root && loadingScreen) {
          clearInterval(statusInterval);
          clearInterval(mountCheckInterval);
          
          console.error('‚ö†Ô∏è App failed to load within timeout period');
          
          root.innerHTML = `
            <div class="error-fallback">
              <div class="error-content">
                <div class="error-title">‚ö†Ô∏è L·ªói T·∫£i Trang</div>
                <p style="margin-bottom: 20px; font-size: 16px;">
                  Trang web kh√¥ng th·ªÉ t·∫£i trong th·ªùi gian cho ph√©p. Vui l√≤ng th·ª≠ c√°c c√°ch sau:
                </p>
                
                <div style="margin: 20px 0;">
                  <button class="error-button" onclick="location.reload()">
                    üîÑ T·∫£i L·∫°i Trang
                  </button>
                  <button class="error-button" onclick="window.location.href='/system-audit'">
                    üîç Ki·ªÉm Tra H·ªá Th·ªëng
                  </button>
                  <button class="error-button" onclick="clearCacheAndReload()">
                    üóëÔ∏è X√≥a Cache
                  </button>
                </div>
                
                <div class="debug-info">
                  <strong>Th√¥ng tin debug:</strong><br>
                  Th·ªùi gian load: ${Date.now() - loadStartTime}ms<br>
                  URL hi·ªán t·∫°i: ${window.location.href}<br>
                  User Agent: ${navigator.userAgent.substring(0, 50)}...<br>
                  K·∫øt n·ªëi: ${navigator.onLine ? 'Online' : 'Offline'}<br>
                  Th·ªùi gian: ${new Date().toLocaleString('vi-VN')}
                </div>
                
                <details style="margin-top: 15px; color: #a7f3d0;">
                  <summary style="cursor: pointer;">üí° H∆∞·ªõng d·∫´n kh·∫Øc ph·ª•c chi ti·∫øt</summary>
                  <div style="margin-top: 10px; text-align: left; font-size: 14px;">
                    <p><strong>C√°c b∆∞·ªõc th·ª≠:</strong></p>
                    <ol style="padding-left: 20px;">
                      <li>T·∫£i l·∫°i trang (F5)</li>
                      <li>X√≥a cache tr√¨nh duy·ªát (Ctrl+Shift+Delete)</li>
                      <li>Ki·ªÉm tra k·∫øt n·ªëi internet</li>
                      <li>Th·ª≠ tr√¨nh duy·ªát kh√°c (Chrome, Firefox, Edge)</li>
                      <li>T·∫Øt c√°c extension tr√¨nh duy·ªát</li>
                      <li>Ch·∫°y ki·ªÉm tra h·ªá th·ªëng ƒë·ªÉ bi·∫øt chi ti·∫øt</li>
                    </ol>
                  </div>
                </details>
              </div>
            </div>
          `;
        }
      }, 15000);
      
      // Clear cache function
      window.clearCacheAndReload = function() {
        try {
          // Clear various storage types
          if (typeof localStorage !== 'undefined') {
            localStorage.clear();
          }
          if (typeof sessionStorage !== 'undefined') {
            sessionStorage.clear();
          }
          
          // Force reload with cache bypass
          window.location.reload(true);
        } catch (e) {
          // Fallback to normal reload
          window.location.reload();
        }
      };
      
      // Global error monitoring
      window.addEventListener('error', function(e) {
        console.error('üö® Global error detected:', {
          message: e.message,
          filename: e.filename,
          lineno: e.lineno,
          colno: e.colno,
          timestamp: new Date().toISOString()
        });
      });
      
      window.addEventListener('unhandledrejection', function(e) {
        console.error('üö® Unhandled promise rejection:', e.reason);
      });
    </script>
  </body>
</html>
